import{w as m}from"./with-props-Bz5eeop3.js";import{v as x,a as n,q as h,n as t,t as f}from"./chunk-XJI4KG32-C1znyQtU.js";import{u as b}from"./request-Dv1uV-Bk.js";const N=m(function(){const{topicId:e}=x(),[i,c]=n.useState(""),[T,r]=n.useState(!1),u=h(),p=b();n.useEffect(()=>{e&&(async()=>{const a=await(await p(`/api/topics/${e}/`,{method:"GET",headers:{"Content-Type":"application/json"}})).json();c(a.text)})()},[e]);const d=async s=>{s.preventDefault(),r(!0);try{const o=e?"PUT":"POST",a=e?`/api/topics/${e}/`:"/api/topics/",l=await p(a,{method:o,headers:{"Content-Type":"application/json"},body:JSON.stringify({text:i})});if(!l.ok)throw new Error(`提交失败: ${l.status}`);u("/topics")}catch(o){console.error("提交主题失败:",o)}finally{r(!1)}};return t.jsxs("div",{className:"container mx-auto p-4",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:e?"编辑主题":"创建新主题"}),t.jsxs("form",{onSubmit:d,children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"topicText",className:"block mb-2",children:"主题内容:"}),t.jsx("input",{type:"text",id:"topicText",value:i,onChange:s=>c(s.target.value),className:"border p-2 mb-4 w-full",required:!0})]}),t.jsxs("div",{className:"flex items-center justify-center gap-10",children:[t.jsx(f,{to:"/topics",className:"text-blue-500 hover:underline",children:"取消"}),t.jsx("button",{type:"submit",className:"bg-blue-500 text-white p-2 rounded",children:e?"更新主题":"创建主题"})]})]})]})});export{N as default};
